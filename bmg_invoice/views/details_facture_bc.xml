<?xml version="1.0"?>
<odoo>
    <record id="view_order_form_inherit_sale_invoice" model="ir.ui.view">
        <field name="name">sale.order.form.salesinvoice.module</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">

            <xpath expr="//button[@name='action_view_invoice']" position="after">
                <button name="action_amount_paid" type="object" class="oe_stat_button " icon="fa-pencil-square-o"
                        attrs="{'invisible': [('invoice_count', '=', 0)]}">
                    <field name="amount_paid_percent" widget="statinfo" string="% Paiement"/>
                </button>
            </xpath>

            <field name="payment_term_id" position="after">
                <field name="payment_status" string="Statut Paiement"
                       widget="badge"
                       decoration-warning="payment_status == 'not_paid'"
                       decoration-info="payment_status == 'partial'"
                       decoration-success="payment_status == 'paid'"
                />
            </field>


            <xpath expr="//field[@name='note']" position="after">
                <group>
                    <group>
                        <field name="currency_id" invisible="1"/>
                        <field name="invoiced_amount" widget='monetary' options="{'currency_field': 'currency_id'}"
                               readonly="True"/>
                        <field name="amount_due_id" widget='monetary' options="{'currency_field': 'currency_id'}"
                               readonly="True"/>
                        <field name="paid_amount" widget='monetary' options="{'currency_field': 'currency_id'}"
                               readonly="True"/>
                    </group>

                </group>
            </xpath>

        </field>

    </record>

    <record id="view_order_tree_status" model="ir.ui.view">
        <field name="name">sale.order.tree</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_tree"/>
        <field name="arch" type="xml">
            <field name="invoice_status" position="after">
                <field
                        name="payment_status"
                        decoration-success="payment_status == 'paid'"
                        decoration-info="payment_status == 'partial'"
                        decoration-warning="payment_status == 'not_paid'"
                        widget="badge"
                        optional="hide"
                        string="Statut Paiement"
                />
            </field>
            <field name="amount_total" position="after">
                <field
                        name="amount_due_id"
                        widget="monetary"
                        decoration-bf="1"
                        optional="hide"
                />
            </field>
        </field>
    </record>
</odoo>
