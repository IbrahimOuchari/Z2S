<odoo>
    <data noupdate="1">

        <!-- Security Group: Maintenance Manager Group -->
        <record id="group_maintenance_manager" model="res.groups">
            <field name="name">Gestionnaire de maintennace</field>
        </record>


        <!-- Rule for Maintenance Manager to edit records -->
        <record id="maintenance_curative_write_rule_allow_edit" model="ir.rule">
            <field name="name">Allow Maintenance Manager to Edit</field>
            <field name="model_id" ref="model_maintenance_curative"/>
            <field name="domain_force">[('state', '!=', 'declaration')]</field>
            <field name="groups" eval="[(4, ref('nn_maintenance_curative.'))]"/>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>
        <record id="maintenance_curative_write_rule_restrict_other_users" model="ir.rule">
            <field name="name">Restrict Write Access for Non-Maintenance Managers</field>
            <field name="model_id" ref="model_maintenance_curative"/>
            <field name="domain_force">[('state', '!=', 'declaration')]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>  <!-- Applies to all other users -->
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
        </record>
        <record id="maintenance_curative_create_and_write" model="ir.rule">
            <field name="name">Restrict Write Access for Non-Maintenance Managers</field>
            <field name="model_id" ref="model_maintenance_curative"/>
            <field name="domain_force">[('state', '=', 'declaration')]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>  <!-- Applies to all other users -->
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="True"/>
            <field name="perm_unlink" eval="True"/>
        </record>
    </data>
</odoo>
